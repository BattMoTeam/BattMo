{
  "$id": "file://battmo/schemas/Geometry",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Specification of the geometry including the discretization parameters",
  "type": "object",

  "properties" : {"Geometry" : {"type" : "object",
                                "properties" : {"case" : {"type" : "string",
                                                          "enum" : ["1D", "pouch", "2D-demo", "3D-demo"]}}},
                  "NegativeElectrode" : { "$ref" : "#/$defs/particlediscretization"},
                  "PositiveElectrode" : { "$ref" : "#/$defs/particlediscretization"}
                 },

  "anyOf" : [{"properties" : {"Geometry" : {"properties" : {"case" : {"const" : "1D"}}}},
              "$ref" : "#/$defs/1D"},
             {"properties" : {"Geometry" : {"properties" : {"case" : {"const" : "2D-demo"}}}},
              "$ref" : "#/$defs/2D-demo" },
             {"properties" : {"Geometry" : {"properties" : {"case" : {"const" : "3D-demo"}}}},
              "$ref" : "#/$defs/3D-demo" }
            ],

  "$defs" : { "1D" : {"properties" : {"NegativeElectrode" : {"properties" : {"ActiveMaterial" : {"$ref" : "#/$defs/1D-param"},
                                                                             "CurrentCollector" : {"$ref" : "#/$defs/1D-param"}}},
                                      "PositiveElectrode" : {"properties" : {"ActiveMaterial" : {"$ref" : "#/$defs/1D-param"},
                                                                             "CurrentCollector" : {"$ref" : "#/$defs/1D-param"}}},
                                      "Electrolyte" : {"properties" : {"Separator" : {"$ref" : "#/$defs/1D-param"}}}
                                     }},
              "1D-param" : {"properties" : {"thickness" : {"type" : "number",
                                                           "description" : "length of the component"},
                                            "N" : {"type" : "integer",
                                                   "description" : "discretization parameter"}}},
              "2D-demo" : {},
              "3D-demo" : {},

              "particlediscretization" : {"properties" :
                                          {"ActiveMaterial" :
                                           { "anyOf" [ {"properties" : {"diffusionModelType" : {"const" : "full"}},
                                                        "dependentSchemas" : {"SolidDiffusion" : 
                                                                              {"properties" : {"soliddiffusion" : {"properties" : {"N"  : {"type" : "integer",
                                                                                                                                           "discretization parameter for the particle"}}}}}}},
                                                       {"not" : {"properties" : {"diffusionModelType" : {"const" : "full"}}}}]
                                           }
                                          }
                                          
                                         }
            }
  
}



